import{r as e,c as t,o as a,a as o,b as n,F as s,d as r,S as c,C as i,p as l,e as u,f as d,t as g,w as p,g as m,h as b,i as h,j as v,k as f,l as _,m as w,n as y,q as E}from"./vendor.2be85ac8.js";const T=e({user:{},account:{},bugs:[],notes:[],activeBug:{}});const A={name:"App",setup:()=>({appState:t((()=>T))})};A.render=function(e,t,c,i,l,u){const d=r("Navbar"),g=r("router-view");return a(),o(s,null,[n("header",null,[n(d)]),n("main",null,[n(g)])],64)};class x{static async confirm(e="Are you sure?",t="You won't be able to revert this!",a="warning",o="Yes, delete it!"){try{return!!(await c.fire({title:e,text:t,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:o})).isConfirmed}catch(n){return!1}}static toast(e="Warning!",t="warning",a="top-end",o=3e3,n=!0){c.fire({title:e,icon:t,position:a,timer:o,timerProgressBar:n,toast:!0,showConfirmButton:!1})}}const C=window.location.origin.includes("localhost"),k=C?"http://localhost:3000":"";function O(e,t){if(C)console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t);else{switch(e){case"log":case"assert":return}console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t)}}const S={log(){O("log",arguments)},error(){O("error",arguments)},warn(){O("warn",arguments)},assert(){O("assert",arguments)},trace(){O("trace",arguments)}},P=i.create({baseURL:k,timeout:8e3});const B={props:{bug:{type:Object,required:!0}},setup(a){const o=e({time:"",newBug:{}});return d((()=>{const e=new Date(a.bug.createdAt);o.time=e.toLocaleTimeString()})),{state:o,account:t((()=>T.account)),createdDate:t((()=>{const e=new Date(a.bug.updatedAt);return new Intl.DateTimeFormat("en-US").format(e)}))}}},N=p("data-v-17eec0d1");l("data-v-17eec0d1");const D={class:"col-md-12 p-3 m-3 bg-info grow"},I={class:"row w-100 m-0"},j={class:"col-md-3 p-0 textShadow text-center"},R={key:0,class:"col-md-3 p-0 text-center"},L=n("h5",{class:"green textShadow"}," Open ",-1),U={key:1,class:"col-md-3 p-0 text-center"},H=n("h5",{class:"red"}," Closed ",-1),q={class:"col-md-3 p-0 textShadow text-center"};u();const V=N(((e,t,s,c,i,l)=>{const u=r("router-link");return a(),o("div",D,[n("div",I,[n(u,{class:"col-md-3 p-0 text-light textShadow text-center",to:{name:"BugDetailsPage",params:{id:s.bug.id}}},{default:N((()=>[n("h5",null,g(s.bug.title),1)])),_:1},8,["to"]),n("div",j,[n("h5",null,g(s.bug.creator.name),1)]),!1===s.bug.closed?(a(),o("div",R,[L])):(a(),o("div",U,[H])),n("div",q,[n("h5",null,g(new Date(s.bug.updatedAt).toLocaleString("en-US")),1)])])])}));B.render=V,B.__scopeId="data-v-17eec0d1";var $=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:B});const z={name:"BugsThread",props:{bugs:{type:Object,required:!0}},components:{BugsCard:B}},Y=p("data-v-dfb7fef2")(((e,t,n,c,i,l)=>{const u=r("BugsCard");return a(!0),o(s,null,m(n.bugs,(e=>(a(),o(u,{key:e.id,bug:e},null,8,["bug"])))),128)}));z.render=Y,z.__scopeId="data-v-dfb7fef2";var M=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:z});let W;const K={},F=function(e,t){if(!t||0===t.length)return e();if(void 0===W){const e=document.createElement("link").relList;W=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in K)return;K[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":W,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e()))};function G(e){return()=>function(e){switch(e){case"./pages/AboutPage.vue":return F((()=>import("./AboutPage.9281e5ac.js")),["/assets/AboutPage.9281e5ac.js","/assets/vendor.2be85ac8.js"]);case"./pages/AccountPage.vue":return F((()=>import("./AccountPage.63cc6c4c.js")),["/assets/AccountPage.63cc6c4c.js","/assets/AccountPage.3b821207.css","/assets/vendor.2be85ac8.js"]);case"./pages/BugDetailsPage.vue":return F((()=>import("./BugDetailsPage.056f7299.js")),["/assets/BugDetailsPage.056f7299.js","/assets/BugDetailsPage.37f329f5.css","/assets/vendor.2be85ac8.js","/assets/BugsService.d57d7fb5.js"]);case"./pages/BugsPage.vue":return F((()=>import("./BugsPage.33708b30.js")),["/assets/BugsPage.33708b30.js","/assets/BugsPage.569e6366.css","/assets/vendor.2be85ac8.js","/assets/BugsService.d57d7fb5.js"]);case"./pages/HomePage.vue":return F((()=>import("./HomePage.3550854f.js")),["/assets/HomePage.3550854f.js","/assets/HomePage.3a60c842.css","/assets/vendor.2be85ac8.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+e))}}(`./pages/${e}.vue`)}const J=[{path:"/",name:"Home",component:G("HomePage")},{path:"/about",name:"About",component:G("AboutPage")},{path:"/bugs",name:"BugsPage",component:G("BugsPage")},{path:"/bugs/:id/notes/",name:"BugDetailsPage",component:G("BugDetailsPage")},{path:"/account",name:"Account",component:G("AccountPage"),beforeEnter:v}],X=b({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:h(),routes:J});const Q=new class{async getAccount(){try{const e=await P.get("/account");T.account=e.data}catch(e){S.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}};let Z=!1,ee=[];const te="connected",ae="authenticate",oe="authenticated",ne="error";const se=new class extends class{constructor(e=k){this.socket=f(e||k),this.on(te,this.onConnected).on(oe,this.onAuthenticated).on(ne,this.onError)}on(e,t){return this.socket.on(e,t.bind(this)),this}onConnected(e){S.log("[SOCKET_CONNECTION]",e),Z=!0}onAuthenticated(e){S.log("[SOCKET_AUTHENTICATED]",e);const t=[...ee];ee=[],t.forEach((e=>{this.emit(e.action,e.payload)}))}authenticate(e){this.socket.emit(ae,e)}onError(e){S.error("[SOCKET_ERROR]",e)}emit(e,t){if(!Z)return S.log("[ENQUEING_ACTION]",{action:e,payload:t}),ee.push({action:e,payload:t});this.socket.emit(e,t)}}{constructor(){super(),this.on("error",this.onError)}onError(e){S.error("[SOCKET_ERROR]",e),x.toast(e.message,"error")}},re=_({domain:"dev-ci5b8144.us.auth0.com",clientId:"mg4rigYCqiJEJXH0ow8CGmnuX9SecxBL",audience:"https://bugcoon.com",useRefreshTokens:!0,onRedirectCallback:e=>{X.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}});async function ce(e){if(!re.isAuthenticated)return e;const t=1e3*re.identity.exp,a=t<Date.now(),o=t<Date.now()+432e5;return a?await re.loginWithPopup():o&&(await re.getTokenSilently(),P.defaults.headers.authorization=re.bearer,se.authenticate(re.bearer)),e}re.on(re.AUTH_EVENTS.AUTHENTICATED,(async function(){P.defaults.headers.authorization=re.bearer,P.interceptors.request.use(ce),T.user=re.user,await Q.getAccount(),se.authenticate(re.bearer)}));const ie={setup:()=>({state:e({dropOpen:!1}),user:t((()=>T.user)),async login(){re.loginWithPopup()},async logout(){re.logout({returnTo:window.location.origin})}})},le=p("data-v-233078bc");l("data-v-233078bc");const ue={class:"navbar navbar-expand-lg navbar-dark bg-primary"},de=n("div",{class:"d-flex flex-column align-items-center"},[n("img",{class:"rotate",alt:"logo",src:"/assets/LadyBugCrusher.40f62438.png",height:"45"})],-1),ge=n("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[n("span",{class:"navbar-toggler-icon"})],-1),pe={class:"collapse navbar-collapse",id:"navbarText"},me={class:"navbar-nav mr-auto"},be={class:"nav-item"},he=w(" BugsPage "),ve={class:"navbar-text"},fe={key:1,class:"dropdown"},_e={class:"mx-3"},we=n("div",{class:"list-group-item list-group-item-action hoverable"}," Account ",-1);u();const ye=le(((e,t,s,c,i,l)=>{const u=r("router-link");return a(),o("nav",ue,[n(u,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:le((()=>[de])),_:1}),ge,n("div",pe,[n("ul",me,[n("li",be,[n(u,{to:{name:"BugsPage"},class:"nav-link text-info"},{default:le((()=>[he])),_:1})])]),n("span",ve,[c.user.isAuthenticated?(a(),o("div",fe,[n("div",{class:"dropdown-toggle",onClick:t[2]||(t[2]=e=>c.state.dropOpen=!c.state.dropOpen)},[n("img",{src:c.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),n("span",_e,g(c.user.name),1)]),n("div",{class:["dropdown-menu p-0 list-group w-100",{show:c.state.dropOpen}],onClick:t[4]||(t[4]=e=>c.state.dropOpen=!1)},[n(u,{to:{name:"Account"}},{default:le((()=>[we])),_:1}),n("div",{class:"list-group-item list-group-item-action hoverable",onClick:t[3]||(t[3]=(...e)=>c.logout&&c.logout(...e))}," logout ")],2)])):(a(),o("button",{key:0,class:"btn btn-outline-primary text-uppercase text-light",onClick:t[1]||(t[1]=(...e)=>c.login&&c.login(...e))}," Login "))])])])}));ie.render=ye,ie.__scopeId="data-v-233078bc";var Ee=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ie});const Te=new class{async getAllNotesInBug(e){const t=await P.get("api/bugs/"+e+"/notes");T.notes=t.data}async createNote(e,t){try{const a=await P.post("api/notes",e);return this.getAllNotesInBug(t),a.data}catch(a){x.toast("Problem Creating Note","error")}}async destroyNote(e,t){try{await x.confirm()&&(await P.delete("api/notes/"+e),this.getAllNotesInBug(t),await x.toast("You removed this note","success"))}catch(a){}}};const Ae={props:{note:{type:Object,required:!0}},setup:a=>({state:e({newNote:{}}),account:t((()=>T.account)),async destroyNote(){try{!1===T.activeBug.closed?await Te.destroyNote(a.note.id,a.note.bugId):x.toast("This Bug is Closed","error")}catch(e){x.toast(e,"error")}}})},xe=p("data-v-c0feebc2");l("data-v-c0feebc2");const Ce={class:"col-md-10 p-2 my-3 bg-secondary textShadow CardShadowing grow"},ke={class:"row m-0 w-100"},Oe={class:"col-md-6 p-0 border border-dark"},Se={class:"p-3"},Pe={class:"col-md-4 p-0 text-break d-flex justify-content-center flex-column align-items-center"},Be={class:""},Ne={key:0,class:"col-md-2 p-0 text-break d-flex align-items-center justify-content-center"};u();const De=xe(((e,t,s,r,c,i)=>{var l,u,d;return a(),o("div",Ce,[n("div",ke,[n("div",Oe,[n("h5",Se,g(s.note.body),1)]),n("div",Pe,[n("img",{class:"pictureWidth rounded-pill",src:null==(l=s.note.creator)?void 0:l.picture,alt:""},null,8,["src"]),n("p",Be,g(null==(u=s.note.creator)?void 0:u.name),1)]),r.account.id===(null==(d=s.note.creator)?void 0:d.id)?(a(),o("div",Ne,[n("button",{class:"btn btn-danger rounded-pill",onClick:t[1]||(t[1]=(...e)=>r.destroyNote&&r.destroyNote(...e)),"aria-label":"Destroy Note"}," - ")])):y("",!0)])])}));Ae.render=De,Ae.__scopeId="data-v-c0feebc2";var Ie=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ae});const je={name:"NotesThread",props:{notes:{type:Object,required:!0}}},Re=p("data-v-461a73cc")(((e,t,n,c,i,l)=>{const u=r("NotesCard");return a(!0),o(s,null,m(n.notes,(e=>(a(),o(u,{key:e.id,note:e},null,8,["note"])))),128)}));je.render=Re,je.__scopeId="data-v-461a73cc";var Le=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:je});const Ue=E(A);!function(e){const t={"./components/BugsCard.vue":$,"./components/BugThread.vue":M,"./components/Navbar.vue":Ee,"./components/NotesCard.vue":Ie,"./components/NotesThread.vue":Le};Object.entries(t).forEach((([t,a])=>{const o=a.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");e.component(o,a.default)}))}(Ue),Ue.use(X).mount("#app");export{T as A,x as P,re as a,P as b,Te as n};
