import{c as t,r as e,f as a,$ as o,p as s,e as l,u as d,d as n,o as i,a as c,b as r,t as u,n as m,s as g,v as b,x as p,F as y,w as h,m as f}from"./vendor.2be85ac8.js";import{P as v,n as w,a as B,A as x}from"./index.907c7230.js";import{b as N}from"./BugsService.d57d7fb5.js";const S={name:"BugsDetailsPage",setup(){const s=d(),l=t((()=>x.activeBug)),n=e({editedBug:{},newNote:{}});return a((async()=>{try{const t=s.params.id;await N.getOneBug(t)}catch(t){v.toast("Taken to New Bug","success")}try{const t=s.params.id;await w.getAllNotesInBug(t)}catch(t){v.toast("Couldnt get notes","error")}})),{bug:l,state:n,account:t((()=>x.account)),notes:t((()=>x.notes)),id:s.params.id,async closeBug(){try{await N.closeBug(s.params.id)}catch(t){v.toast("It was Too Big","error")}},async editBug(){try{await N.editBug(s.params.id,n.editedBug),o("#editModal").modal("hide")}catch(t){v.toast("Failed to Edit","error")}},async createNote(){if(B.isAuthenticated)try{n.newNote.bugId=s.params.id,await w.createNote(n.newNote,s.params.id),n.newNote={},o("#noteModal").modal("hide"),v.toast("You Made a Note!","success")}catch(t){v.toast("Could Note Create Note","error")}else v.toast("You Must Log In","error"),o("noteModal").modal("hide")}}}},C=h();s("data-v-359c6460");const j={class:"row m-0 w-100 BugsDetailsPage d-flex justify-content-center bugsBackground"},M={class:"col-md-11  my-3 texthadow"},A={class:"row m-0 w-100 bg-warning text-light textShadow CardShadowing"},k={class:"col-md-12 p-0"},D=r("h4",{class:"m-1"}," Title ",-1),T={class:"d-flex row w-100 m-0 my-2 justify-content-between"},I={class:"p-1 col-md-2 d-flex justify-content-center flex-column align-items-center"},U={class:"mt-2"},E={key:0,class:"col-md-3 green p-0 d-flex justify-content-center align-items-center"},L=r("h1",null,"This Bug Is Completed!",-1),P={key:1,class:"col-md-3 d-flex justify-content-around flex-column align-items-center"},V={class:""},Y=r("h4",null,[f("Status: "),r("span",{class:"green"},"Open")],-1),q={key:2,class:"col-md-3 d-flex justify-content-around flex-column align-items-center"},F={class:""},O=r("h4",null,[f("Status: "),r("span",{class:"red"},"Closed")],-1),R={class:"row m-0 w-100 my-4 d-flex justify-content-end bg-secondary textShadow CardShadowing"},_={class:"col-md-12 p-0 scrollDescription border border-dark"},H=r("h4",null,"Bug Description",-1),z={class:"p-2"},G={key:0,class:"col-md-3 p-0 mt-3 d-flex justify-content-around"},J=r("h6",null,"Squish Bug",-1),K=r("button",{class:"btn btn-info","data-toggle":"modal","data-target":"#editModal"},[r("h6",null,"Edit Bug")],-1),Q={class:"row m-0 w-100 bg-warning text-light textShadow CardShadowing d-flex justify-content-center"},W={key:0,class:"col-md-2 d-flex justify-content-around align-items-center"},X=r("h5",null,"Add Note",-1),Z=r("button",{class:"btn btn-success rounded-pill","data-toggle":"modal","data-target":"#noteModal","aria-label":"Add Note Button"}," + ",-1),$=r("div",{class:"col-md-2 d-flex justify-content-around align-items-center"},[r("h5",null,"Notes")],-1),tt={class:"row m-0 w-100 my-1 text-light textShadow d-flex justify-content-center scrollDescription"},et={class:"modal fade",id:"editModal",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},at={class:"modal-dialog",role:"document"},ot={class:"modal-content"},st=r("div",{class:"modal-header"},[r("h5",{class:"modal-title"}," Edit Bug "),r("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[r("span",{"aria-hidden":"true"},"×")])],-1),lt={class:"modal-body"},dt={class:"form-group"},nt=r("label",{for:"title"},"Title",-1),it=r("label",{for:"description"},"Description",-1),ct=r("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal","aria-label":"Close Modal for Changing Bug"}," Close ",-1),rt=r("button",{type:"submit",class:"btn btn-primary","aria-label":"Save Changes to Bug"}," Save ",-1),ut={class:"modal fade",id:"noteModal",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},mt={class:"modal-dialog",role:"document"},gt={class:"modal-content"},bt=r("div",{class:"modal-header"},[r("h5",{class:"modal-title"}," Add Note "),r("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[r("span",{"aria-hidden":"true"},"×")])],-1),pt={class:"modal-body"},yt={class:"form-group"},ht=r("label",{for:"body"},"Enter Your Note Here!",-1),ft=r("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal","aria-label":"Close Note Modal"}," Close ",-1),vt=r("button",{type:"submit",class:"btn btn-primary","aria-label":"Save Note"}," Save ",-1);l();const wt=C(((t,e,a,o,s,l)=>{var d,h,f,v;const w=n("NotesThread");return i(),c(y,null,[r("div",j,[r("div",M,[r("div",A,[r("div",k,[D,r("h2",null,u(o.bug.title),1),r("div",T,[r("div",I,[r("img",{class:"rounded-pill w-50 p-0",src:null==(d=o.bug.creator)?void 0:d.picture,alt:""},null,8,["src"]),r("h5",U," Reported By: "+u(null==(h=o.bug.creator)?void 0:h.name),1)]),!0===o.bug.closed?(i(),c("div",E,[L])):m("",!0),!1===o.bug.closed?(i(),c("div",P,[r("h4",V," Updated At: "+u(new Date(o.bug.updatedAt).toLocaleString("en-US")),1),Y])):(i(),c("div",q,[r("h5",F," Updated At: "+u(new Date(o.bug.updatedAt).toLocaleString("en-US")),1),O]))])])]),r("div",R,[r("div",_,[H,r("h5",z,u(o.bug.description),1)]),o.account.id===(null==(f=o.bug.creator)?void 0:f.id)&&!1===o.bug.closed?(i(),c("div",G,[r("button",{onClick:e[1]||(e[1]=(...t)=>o.closeBug&&o.closeBug(...t)),class:"btn btn-danger","aria-label":"Close Bug Button"},[J]),K])):m("",!0)]),r("div",Q,[!1===o.bug.closed?(i(),c("div",W,[X,Z])):m("",!0),$]),r("div",tt,[r(w,{notes:o.notes},null,8,["notes"])])])]),r("div",et,[r("div",at,[r("div",ot,[st,r("div",lt,[r("h6",null,"Reported By "+u(null==(v=o.bug.creator)?void 0:v.name),1),r("form",{onSubmit:e[4]||(e[4]=g(((...t)=>o.editBug&&o.editBug(...t)),["prevent"]))},[r("div",dt,[nt,b(r("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>o.state.editedBug.title=t),placeholder:"Title...",id:"title",name:"title",class:"form-control"},null,512),[[p,o.state.editedBug.title]]),it,b(r("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.state.editedBug.description=t),placeholder:"Description...",class:"form-control",name:"description",id:"description",rows:"3",minlength:"3",required:""},null,512),[[p,o.state.editedBug.description]])]),ct,rt],32)])])])]),r("div",ut,[r("div",mt,[r("div",gt,[bt,r("div",pt,[r("form",{onSubmit:e[6]||(e[6]=g(((...t)=>o.createNote&&o.createNote(...t)),["prevent"]))},[r("div",yt,[ht,b(r("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>o.state.newNote.body=t),placeholder:"Note...",id:"body",name:"body",class:"form-control"},null,512),[[p,o.state.newNote.body]])]),ft,vt],32)])])])])],64)}));S.render=wt,S.__scopeId="data-v-359c6460";export default S;
